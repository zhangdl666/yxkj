<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="__PUBLIC__/Layui/css/layui.css" media="all">
    <style>
        body{
            height: 100vh;
        }
        div{
            display: inline-block;
            width: 100%;
            height: 100%;
            text-align: center;
        }
        form{
            display: inline-block;
            height: 100%;
            width: 100%;
        }
        button{
            line-height: 100%;
            vertical-align: middle;
        }
        p{
            display: inline-block;
            width: 1px;
            height: 100%;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div>
        <form enctype="multipart/form-data">
           <p></p>
            <button type="button" class="layui-btn" id="test1">
                设备上传
            </button>
            <span style="color: green;display: none" id="file_src"></span>
        </form>
    </div>
</body>
<script type="text/javascript" src="__JS__/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Layui/layui.js"></script>
<script type="text/javascript">
    layui.use('upload', function () {
        var upload = layui.upload;
        //执行实例
        var uploadInst = upload.render({
            elem: '#test1' //绑定元素
            , accept: 'file' //允许上传的文件类型
            , exts:'csv'
            , url: '/Pc/Device/fileExcel' //上传接口
            , done: function (res) {
                if(res.code==0){
                    $("#file_src").show();
                    $("#file_src").text(res.message);
                    parent.location.reload();
                }else {
                    $("#file_src").show();
                    $("#file_src").text(res.message);
                }

            }
            , error: function () {

                //请求异常回调
                layer.msg('文件添加失败',{time:2000, offset: 0, icon:2});
            }
        });
    });
</script>
